---
phase: 09-polish-persistence-responsive-design
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - web/src/App.tsx
  - web/src/components/visualization/ChartContainer.tsx
  - web/src/components/visualization/ResultsTable.tsx
  - web/src/components/processing/ProcessingProgress.tsx
autonomous: true

must_haves:
  truths:
    - "Layout works on desktop (1024px+) with side-by-side charts and table"
    - "Layout works on tablet (768px-1024px) with stacked layout"
    - "Layout works on mobile (<768px) with single column and horizontal scroll for charts"
    - "All buttons have minimum 44x44px touch targets"
  artifacts:
    - path: "web/src/App.tsx"
      provides: "Main responsive layout with breakpoint-aware grid"
      contains: "grid grid-cols-1 lg:grid-cols-2"
    - path: "web/src/components/visualization/ChartContainer.tsx"
      provides: "Responsive chart wrapper with horizontal scroll on mobile"
      contains: "overflow-x-auto lg:overflow-visible"
    - path: "web/src/components/visualization/ResultsTable.tsx"
      provides: "Responsive table with horizontal scroll on mobile"
      contains: "overflow-x-auto"
  key_links:
    - from: "web/src/App.tsx"
      to: "Tailwind CSS breakpoints"
      via: "Mobile-first utility classes (unprefixed=mobile, md:=768px, lg:=1024px)"
      pattern: "className=.*lg:grid-cols-2"
    - from: "web/src/components/visualization/ChartContainer.tsx"
      to: "Recharts ResponsiveContainer"
      via: "width='99%' workaround for display bug"
      pattern: "ResponsiveContainer.*width=.*99%"
---

<objective>
Implement responsive layout that works on desktop (side-by-side), tablet (stacked), and mobile (single column with horizontal scroll), with proper touch target sizing.

Purpose: The current UI is desktop-first and breaks on mobile devices. Users need to access the tool on phones and tablets with proper responsive layouts.

Output: Responsive App.tsx layout with Tailwind breakpoints, scrollable chart containers for mobile, and minimum 44x44px touch targets on all buttons.
</objective>

<execution_context>
@/Users/vinicusmoreira/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vinicusmoreira/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-polish-persistence-responsive-design/09-RESEARCH.md
@web/src/App.tsx
@web/src/components/visualization/ChartContainer.tsx
@web/src/components/visualization/ResultsTable.tsx

# Only reference prior plan SUMMARYs if genuinely needed
@web/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update App.tsx main layout with responsive breakpoints</name>
  <files>web/src/App.tsx</files>
  <action>
Modify `web/src/App.tsx` layout to use Tailwind mobile-first breakpoints:

1. Update main container padding:
   - Mobile: `p-4` (16px)
   - Desktop: `lg:p-8` (32px)

2. Update max-width container:
   - Mobile: `max-w-full`
   - Desktop: `lg:max-w-7xl`

3. Convert token count analysis section (lines ~191-206) to responsive grid:
   - Current: Single column stack
   - Desktop: `grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-6`
   - This shows 2 charts side-by-side on desktop

4. Update tokenizer comparison section (lines ~229-243):
   - Add `grid grid-cols-1 lg:grid-cols-2 gap-4` around ComparisonHeatmap and ComparisonBarChart
   - Keep `space-y-4` for mobile stack

5. Ensure all sections use responsive spacing:
   - Mobile: `space-y-4`
   - Desktop: `lg:space-y-6`

REMEMBER: Mobile-first means unprefixed classes = mobile, `md:` = 768px+, `lg:` = 1024px+
Do NOT use `sm:` prefix for mobile - that's a common anti-pattern.
  </action>
  <verify>
App.tsx compiles: `cd web && npx tsc --noEmit`
  </verify>
  <done>
App.tsx uses responsive Tailwind breakpoints for desktop (lg:), tablet (md:), and mobile (unprefixed) layouts.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add horizontal scroll to ChartContainer for mobile</name>
  <files>web/src/components/visualization/ChartContainer.tsx</files>
  <action>
Modify `web/src/components/visualization/ChartContainer.tsx` to:

1. Read existing ChartContainer component structure
2. Wrap the children in a div with:
   - Mobile: `overflow-x-auto` (horizontal scroll)
   - Desktop: `lg:overflow-x-visible` (no scroll)
   - Inner container: `min-w-[600px]` (force scroll on mobile)

3. Update Recharts ResponsiveContainer props:
   - Use `width="99%"` NOT `width="100%"` (known Recharts bug #2285)
   - Keep existing aspect or height prop

Pattern: Use the responsive chart pattern from RESEARCH.md (lines 189-217).

If ChartContainer doesn't exist, create it with:
- Props: title, height (optional), children
- Card wrapper with header showing title
- Scrollable container for children
  </action>
  <verify>
ChartContainer.tsx compiles: `cd web && npx tsc --noEmit`
  </verify>
  <done>
ChartContainer provides horizontal scroll for charts on mobile while maintaining full-width display on desktop.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add horizontal scroll to ResultsTable for mobile</name>
  <files>web/src/components/visualization/ResultsTable.tsx</files>
  <action>
Modify `web/src/components/visualization/ResultsTable.tsx` to:

1. Read existing ResultsTable component structure
2. If using TanStack Table (likely), wrap the table container in:
   - Outer div: `overflow-x-auto lg:overflow-hidden`
   - Inner div: `min-w-[800px]`

3. Ensure the table itself has:
   - `w-full` class for width

4. Add responsive padding to table cells if needed:
   - Mobile: `px-2 py-2`
   - Desktop: `lg:px-4 lg:py-3`

If ResultsTable uses custom table implementation, apply the same overflow pattern to the table wrapper div.
  </action>
  <verify>
ResultsTable.tsx compiles: `cd web && npx tsc --noEmit`
  </verify>
  <done>
ResultsTable scrolls horizontally on mobile while maintaining full width on desktop.
  </done>
</task>

<task type="auto">
  <name>Task 4: Ensure all buttons meet 44x44px touch target minimum</name>
  <files>web/src/App.tsx</files>
  <action>
Audit and update all buttons in `web/src/App.tsx` to ensure minimum 44x44px touch targets:

1. Check all Button components and add `min-h-[44px]` class if missing:
   - Reset button (line ~171-177)
   - Process Another Batch button (line ~254-260)
   - Any other action buttons

2. Update button sizing classes:
   - Replace `className="w-full"` with `className="w-full min-h-[44px]"`
   - For icon-only buttons: add `min-w-[44px] min-h-[44px]`
   - For buttons with icons: ensure padding + icon height >= 44px

3. Check ProcessButton component usage - verify it has proper sizing (if not, this will be addressed in 09-03)

4. Check NewSessionButton from 09-01 - should already have min-h-[44px]

Reference: Touch target requirements from RESEARCH.md (lines 503-529).
WCAG 2.2 and iOS HIG require minimum 44x44px for all interactive elements.
  </action>
  <verify>
All buttons in App.tsx have min-h-[44px] or equivalent sizing. TypeScript compiles: `cd web && npx tsc --noEmit`
  </verify>
  <done>
All interactive elements in App.tsx meet minimum 44x44px touch target size for mobile accessibility.
  </done>
</task>

<task type="auto">
  <name>Task 5: Update ProcessingProgress component for responsive layout</name>
  <files>web/src/components/processing/ProcessingProgress.tsx</files>
  <action>
Read and modify `web/src/components/processing/ProcessingProgress.tsx` to:

1. Ensure progress bar is full-width on mobile: `w-full`
2. Update responsive spacing:
   - Mobile: `space-y-2`
   - Desktop: `lg:space-y-4`
3. If showing current file/path text, ensure it wraps or truncates on mobile:
   - Add `truncate` class for long paths
   - Or `break-all` for forcing wrap
4. Ensure cancel button has `min-h-[44px]` class

Pattern: Use same responsive spacing patterns as App.tsx (unprefixed = mobile, lg: = desktop).
  </action>
  <verify>
ProcessingProgress.tsx compiles: `cd web && npx tsc --noEmit`
  </verify>
  <done>
ProcessingProgress component displays correctly on mobile with proper text wrapping and touch targets.
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. Start dev server: `cd web && npm run dev`
2. Test responsive layouts at different viewport sizes:
   - Desktop (1280px+): Charts side-by-side, full layout
   - Tablet (768px-1024px): Stacked layout, no horizontal scroll
   - Mobile (<768px): Single column, horizontal scroll for charts/table
3. Verify all buttons can be easily tapped on mobile (use browser DevTools device emulation)
4. Check charts render correctly with width="99%" workaround
5. Verify no horizontal scroll on desktop (except intentional table/chart scroll)
</verification>

<success_criteria>
Responsive layout is working when:
- [ ] Desktop (1024px+): Charts display side-by-side in 2-column grid
- [ ] Tablet (768px-1024px): Layout stacks vertically, no horizontal scroll needed
- [ ] Mobile (<768px): Single column, charts scroll horizontally, full-width content
- [ ] All buttons have minimum 44x44px touch targets (verify in DevTools)
- [ ] Recharts render correctly at all breakpoint sizes
- [ ] No layout shift when rotating device (if testing on actual device)
- [ ] Text remains readable at all sizes (no tiny text on mobile)
</success_criteria>

<output>
After completion, create `.planning/phases/09-polish-persistence-responsive-design/09-02-SUMMARY.md`
</output>
